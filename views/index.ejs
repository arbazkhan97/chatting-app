<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chat app</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>
<body>

<div class="row col-8 offset-2">

    <h1 class="offset-1 col-5 mt-4  text-primary" >All Chats!</h1> 

    <form  method="get" action="/chats/new">
        <button class="btn col-5 btn-warning  mb-3 mt-4 offset-1 text-dark ">Add New Chat</button>

    </form> 
    
<% for(let chat of chats  ) { %>

    <div class="chat offset-1 bg-secondary  mb-3 col-5 ">
        
        <p class="text-warning" >From: <strong class="text-light" ><%= chat.from %></strong></p> 
        <div class="message bg-dark">

            <p class="text-warning">Message:</p>

            <p> <%=chat.message  %> </p>

            <form class=" form mt-2" method="GET" action="/chats/<%= chat._id %>/edit">

                <button class="btn btn-outline-warning btn-sm mb-2">Edit  Chat</button>
            </form>

            <form class="form mt-2" action="/chats/<%= chat._id %>">
                <button class="btn btn-outline-warning mb-2 btn-sm">Show Chat</button>
            </form>
            

            <form class="form mt-2" method="post" action="/chats/<%= chat._id %>?_method=DELETE">

                <button class="btn btn-outline-danger btn-sm mb-2">Delete Chat</button>
            </form>
            
            

            
        </div>

        <p class="text-warning mt-1 ">Received by: <strong class="text-light" ><%= chat.to %></strong></p>
        <hr>

        <p class="text-warning" > Time: <span class="text-light"><%= chat.created_at.toString().split(" ")[4] %></span></p>
        <p class="text-warning"> Day & Date : <span class="text-light"><%= chat.created_at.toString().split(' ').slice(0,4).join(" ")   %></span></p>  
    </div> 
   

<% } %>
   
</div>
</body>
</html>

